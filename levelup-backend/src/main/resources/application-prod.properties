# ============================================
# Level-Up Gamer - Perfil PRODUCCIÓN
# Configuración para ambiente de producción
# ============================================

# ============================================
# Base de Datos MySQL (Producción)
# ============================================
# En producción, usar variables de entorno para credenciales:
# export DB_URL=jdbc:mysql://...
# export DB_USERNAME=...
# export DB_PASSWORD=...
spring.datasource.url=${DB_URL:jdbc:mysql://127.0.0.1:3306/levelup_db}
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.username=${DB_USERNAME:levelup}
spring.datasource.password=${DB_PASSWORD:LevelUp2024!}

spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Pool de conexiones optimizado para producción
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000

# ============================================
# URL Base del Backend (Producción)
# ============================================
# Usar variable de entorno o dominio definitivo
app.base-url=${APP_BASE_URL:https://api.levelupgamer.lol}

# ============================================
# Transbank - PRODUCCIÓN
# ============================================
# IMPORTANTE: En producción real, cambiar a URLs de Transbank oficial
# https://webpay3g.transbank.cl (producción)
# https://webpay3gint.transbank.cl (integración/testing)
# ============================================
payment.transbank.mock-base-url=${TRANSBANK_BASE_URL:https://webpay3gint.transbank.cl}
payment.transbank.mock-init-endpoint=${payment.transbank.mock-base-url}/rswebpaytransaction/api/webpay/v1.2/transactions
payment.transbank.mock-status-endpoint=${payment.transbank.mock-base-url}/rswebpaytransaction/api/webpay/v1.2/transactions
payment.transbank.mock-confirm-endpoint=${payment.transbank.mock-base-url}/rswebpaytransaction/api/webpay/v1.2/transactions

# API Key de Transbank (usar variable de entorno)
payment.transbank.commerce-code=${TRANSBANK_COMMERCE_CODE:597055555532}
payment.transbank.api-key=${TRANSBANK_API_KEY:579B532A7440BB0C9079DED94D31EA1615BACEB56610332264630D42D0A36B1C}

# URL de retorno al frontend después del pago
payment.transbank.return-url=${FRONTEND_URL:https://levelupgamer.lol}/pago/retorno

# URL donde Transbank notifica el resultado (callback)
payment.transbank.callback-url=${app.base-url}/api/v1/sales/transbank/callback

# Timeouts más estrictos en producción
payment.transbank.connect-timeout=5000
payment.transbank.read-timeout=15000

# ============================================
# Logging - Mínimo en producción
# ============================================
logging.level.root=WARN
logging.level.org.springframework.security=WARN
logging.level.com.levelup.backend=INFO

# ============================================
# Seguridad adicional
# ============================================
server.error.include-stacktrace=never
server.error.include-message=never

# ============================================
# Actuator - Solo health para producción
# ============================================
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=never
